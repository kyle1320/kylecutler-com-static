"use strict";window.onload=function(){function e(){n.clear(n.COLOR_BUFFER_BIT),n.uniform1f(f,((new Date).getTime()-u)/1e3),n.bindBuffer(n.ARRAY_BUFFER,a),n.enableVertexAttribArray(o),n.vertexAttribPointer(o,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6),c||window.requestAnimFrame(e)}function r(r){(c=r)||e()}var t=$("draw-canvas"),n=getGL(t,{preserveDrawingBuffer:!0});if(n){var a,i,o,f,c=!0,u=(new Date).getTime();!function(){scaleCanvas(t,n),loadFiles(["shader.vert","shader.frag"],function(e){i=getGLProgram(n,e[0],e[1]),n.useProgram(i),o=n.getAttribLocation(i,"position"),f=n.getUniformLocation(i,"time"),r(!1)},function(e){console.log("Couldn't find file: "+e)}),a=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,a),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),n.STATIC_DRAW),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.clearColor(0,0,0,1),$("save-btn").addEventListener("click",function(){$("save-img").src=t.toDataURL("image/png")})}()}};