"use strict";window.onload=function(){function e(){i.clear(i.COLOR_BUFFER_BIT),i.uniform1f(f,((new Date).getTime()-c)/1e3),i.uniform2f(screenSizeUniform,i.drawingBufferWidth,i.drawingBufferHeight),i.uniform4f(boundsUniform,-10,-10,10,10),i.bindBuffer(i.ARRAY_BUFFER,t),i.enableVertexAttribArray(a),i.vertexAttribPointer(a,2,i.FLOAT,!1,0,0),i.drawArrays(i.TRIANGLES,0,6),u||window.requestAnimFrame(e)}function r(r){(u=r)||e()}var n=$("draw-canvas"),i=getGL(n,{preserveDrawingBuffer:!0});if(i){var t,o,a,f,u=!0,c=(new Date).getTime();!function(){scaleCanvas(n,i),loadFiles(["shader.vert","shader.frag"],function(e){o=getGLProgram(i,e[0],e[1]),i.useProgram(o),a=i.getAttribLocation(o,"position"),f=i.getUniformLocation(o,"time"),screenSizeUniform=i.getUniformLocation(o,"screenSize"),boundsUniform=i.getUniformLocation(o,"bounds"),r(!1)},function(e){console.log("Couldn't find file: "+e)}),t=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,t),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),i.STATIC_DRAW),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.clearColor(0,0,0,1),$("save-btn").addEventListener("click",function(){$("save-img").src=n.toDataURL("image/png")})}()}};