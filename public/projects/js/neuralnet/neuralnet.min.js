"use strict";var options={mutation_rate:.05,breed_percent:.1,top_percent:.01,population:1e3,layers:[10,10]};window.onload=function(){function e(){r=new FlappyGame,o=new NeuralSim(options.population,1/0,function(e){r.run(e)},r.num_inputs,options.layers,r.num_outputs)}function n(){f?o.advance():r.update(o.bestnet),b.generation.innerHTML=o.gen_num+" / "+o.n_gens,b.bestfit.innerHTML=""+o.bestfit,b.diversity.innerHTML=""+(o.bestfit-o.worstfit)/o.bestfit,l||setTimeout(n,10)}function t(){o.bestnet&&o.bestnet.draw(v,d),r.draw(u,c,o)}function i(e){f=e,e||console.log(o.bestnet),p.evolveBtn.innerHTML=f?"Watch":"Evolve"}function s(e){e&&!l?(l=e,clearInterval(a)):!e&&l&&(l=e,a=setInterval(t,15),n()),p.pauseBtn.innerHTML=l?"Resume":"Pause"}var a,o,r,u=$("draw-canvas"),c=u.getContext("2d"),v=$("net-canvas"),d=v.getContext("2d"),l=!0,f=!0,p={pauseBtn:$("pause"),evolveBtn:$("evolve"),resetBtn:$("reset")},b={generation:$("generation"),bestfit:$("bestfit"),diversity:$("diversity")};!function(){scaleCanvas(u,c),scaleCanvas(v,d),fitElement(u),fitElement(v),p.pauseBtn.addEventListener("click",function(){s(!l)}),p.evolveBtn.addEventListener("click",function(){i(!f)}),p.resetBtn.addEventListener("click",e),window.addEventListener("keydown",function(e){f||r.keyPressed(e)}),e(),i(!0),s(!1)}()};