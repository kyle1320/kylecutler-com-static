window.onload=function(){function e(){scaleCanvas(t,a),loadFiles(["shader.vert","shader.frag"],function(e){o=getGLProgram(a,e[0],e[1]),a.useProgram(o),f=a.getAttribLocation(o,"position"),c=a.getUniformLocation(o,"time"),n(!1)},function(e){console.log("Couldn't find file: "+e)}),i=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,i),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.STATIC_DRAW),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight),a.clearColor(0,0,0,1),$("save-btn").addEventListener("click",function(){$("save-img").src=t.toDataURL("image/png")})}function r(){a.clear(a.COLOR_BUFFER_BIT),a.uniform1f(c,((new Date).getTime()-d)/1e3),a.bindBuffer(a.ARRAY_BUFFER,i),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLES,0,6),u||window.requestAnimFrame(r)}function n(e){u=e,u||r()}var t=$("draw-canvas"),a=getGL(t,{preserveDrawingBuffer:!0});if(a){var i,o,f,c,u=!0,d=(new Date).getTime();e()}};