function scaleCanvas(e,n){var t=window.devicePixelRatio||1,i=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,o=t/i;return e.style.width=e.width+"px",e.style.height=e.height+"px",e.drawWidth=e.width,e.drawHeight=e.height,e.width*=o,e.height*=o,n instanceof CanvasRenderingContext2D&&n.scale(o,o),o}function fitElement(e,n,t,i){n=n||e.clientWidth,t=t||e.clientHeight,i=i||function(){};var o=n/t,a=function(){var a=window.getComputedStyle(e.parentElement,null),r=parseInt(a.getPropertyValue("width")),c=parseInt(a.getPropertyValue("height")),u=Math.min(r,n),l=Math.min(c,t);u>o*l?u=Math.floor(o*l):l=Math.floor(u/o),e.style.width=u+"px",e.style.height=l+"px",i(e)};a(),window.addEventListener("resize",a)}function randomColor(){return"#"+("00000"+Math.floor(16777216*Math.random()).toString(16)).slice(-6)}function getRelativeCoord(e,n){var t,i,o;if(n instanceof MouseEvent)t=n.clientX,i=n.clientY,o=~n.buttons;else if(window.TouchEvent&&n instanceof TouchEvent){var a=n.changedTouches[0];t=a.clientX,i=a.clientY,o=!0}var r=e.getBoundingClientRect();return{x:(t-r.left)*(e.drawWidth/e.clientWidth),y:(i-r.top)*(e.drawHeight/e.clientHeight)}}function takeTouchFocus(e){window.TouchEvent&&e instanceof TouchEvent&&e.touches.length<2&&e.preventDefault()}function getSaturatedColor(e){var n=Math.floor(6*e),t=(6*e-n+1)%1,i=("0"+Math.round(255*(1-t)).toString(16)).slice(-2),o=("0"+Math.round(255*t).toString(16)).slice(-2);switch((n+6)%6){case 0:return"#FF"+o+"00";case 1:return"#"+i+"FF00";case 2:return"#00FF"+o;case 3:return"#00"+i+"FF";case 4:return"#"+o+"00FF";case 5:return"#FF00"+i}}function linkCheckboxToBoolean(e,n,t,i){i=i||function(){},e.checked=n[t],e.addEventListener("click",function(){n[t]=e.checked,i()})}function linkInputToNumber(e,n,t,i,o){i=i||function(){},void 0===o&&(o=!0),e.value=String(n[t]),o?e.addEventListener("input",function(){isNaN(e.valueAsNumber)||(n[t]=e.valueAsNumber),i()}):e.addEventListener("change",function(){isNaN(e.valueAsNumber)||(n[t]=e.valueAsNumber),i()}),e.addEventListener("blur",function(){e.value=String(n[t])})}function linkColorChooserToValues(e,n,t,i){i=i||function(){},e.color.fromRGB(n[t][0]/255,n[t][1]/255,n[t][2]/255),e.addEventListener("change",function(){n[t][0]=Math.floor(255*e.color.rgb[0]),n[t][1]=Math.floor(255*e.color.rgb[1]),n[t][2]=Math.floor(255*e.color.rgb[2]),i()})}function linkSelectToString(e,n,t,i){i=i||function(){},e.value=n[t],e.addEventListener("change",function(){n[t]=e.value,i()})}function loadFile(e,n,t,i){i=i||function(){};var o=new XMLHttpRequest;o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(o.responseText,n):i(e))},o.send(null)}function loadFiles(e,n,t){function i(e,t){r[t]=e,a++,a==o&&n(r)}for(var o=e.length,a=0,r=[],c=0;o>c;c++)loadFile(e[c],c,i,t)}var $=function(e){return document.getElementById(e)},isNaN=Number.isNaN||window.isNaN||function(e){return"number"==typeof e&&e!==e};Math.clamp=function(e,n,t){return Math.max(n,Math.min(e,t))},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout}();